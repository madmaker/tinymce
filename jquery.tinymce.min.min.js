!function(g){function d(){function e(i){"remove"===i&&this.each(function(p,o){var q=a(o);q&&q.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(p,o){var q=tinymce.get(o.id.replace(/_parent$/,""));q&&q.remove()})}function l(o){var p,i=this;if(null!=o){e.call(i),i.each(function(q,u){var s;(s=tinymce.get(u.id))&&s.setContent(o)})}else{if(i.length>0&&(p=tinymce.get(i[0].id))){return p.getContent()}}}function a(n){var i=null;return n&&n.id&&b.tinymce&&(i=tinymce.get(n.id)),i}function m(i){return !!(i&&i.length&&b.tinymce&&i.is(":tinymce"))}var k={};g.each(["text","html","val"],function(o,n){var i=k[n]=g.fn[n],p="text"===n;g.fn[n]=function(v){var q=this;if(!m(q)){return i.apply(q,arguments)}if(v!==j){return l.call(q.filter(":tinymce"),v),i.apply(q.not(":tinymce"),arguments),q}var w="",r=arguments;return(p?q:q.eq(0)).each(function(s,x){var u=a(x);w+=u?p?u.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):u.getContent({save:!0}):i.apply(g(x),r)}),w}}),g.each(["append","prepend"],function(o,p){var n=k[p]=g.fn[p],i="prepend"===p;g.fn[p]=function(r){var q=this;return m(q)?r!==j?("string"==typeof r&&q.filter(":tinymce").each(function(s,v){var u=a(v);u&&u.setContent(i?r+u.getContent():u.getContent()+r)}),n.apply(q.not(":tinymce"),arguments),q):void 0:n.apply(q,arguments)}}),g.each(["remove","replaceWith","replaceAll","empty"],function(q,p){var o=k[p]=g.fn[p];g.fn[p]=function(){return e.call(this,p),o.apply(this,arguments)}}),k.attr=g.fn.attr,g.fn.attr=function(p,n){var i=this,r=arguments;if(!p||"value"!==p||!m(i)){return n!==j?k.attr.apply(i,r):k.attr.apply(i,r)}if(n!==j){return l.call(i.filter(":tinymce"),n),k.attr.apply(i.not(":tinymce"),r),i}var o=i[0],q=a(o);return q?q.getContent({save:!0}):k.attr.apply(g(o),r)}}var j,f,c,h=[],b=window;g.fn.tinymce=function(r){function i(){var l=[],n=0;c||(d(),c=!0),o.each(function(x,v){var u,p=v.id,w=r.oninit;p||(v.id=p=tinymce.DOM.uniqueId()),tinymce.get(p)||(u=new tinymce.Editor(p,r,tinymce.EditorManager),l.push(u),u.on("init",function(){var y,s=w;o.css("visibility",""),w&&++n==l.length&&("string"==typeof s&&(y=s.indexOf(".")===-1?null:tinymce.resolve(s.replace(/\.\w+$/,"")),s=tinymce.resolve(s)),s.apply(y||tinymce,l))}))}),g.each(l,function(s,p){p.render()})}var a,q,e,o=this,k="";if(!o.length){return o}if(!r){return window.tinymce?tinymce.get(o[0].id):null}if(o.css("visibility","hidden"),b.tinymce||f||!(a=r.script_url)){1===f?h.push(i):i()}else{f=1,q=a.substring(0,a.lastIndexOf("/")),a.indexOf(".min")!=-1&&(k=".min"),b.tinymce=b.tinyMCEPreInit||{base:q,suffix:k},a.indexOf("gzip")!=-1&&(e=r.language||"en",a=a+(/\?/.test(a)?"&":"?")+"js=true&core=true&suffix="+escape(k)+"&themes="+escape(r.theme||"modern")+"&plugins="+escape(r.plugins||"")+"&languages="+(e||""),b.tinyMCE_GZ||(b.tinyMCE_GZ={start:function(){function l(n){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(n))}l("langs/"+e+".js"),l("themes/"+r.theme+"/theme"+k+".js"),l("themes/"+r.theme+"/langs/"+e+".js"),g.each(r.plugins.split(","),function(p,s){s&&(l("plugins/"+s+"/plugin"+k+".js"),l("plugins/"+s+"/langs/"+e+".js"))})},end:function(){}}));var m=document.createElement("script");m.type="text/javascript",m.onload=m.onreadystatechange=function(l){l=l||window.event,2===f||"load"!=l.type&&!/complete|loaded/.test(m.readyState)||(tinymce.dom.Event.domLoaded=1,f=2,r.script_loaded&&r.script_loaded(),i(),g.each(h,function(p,n){n()}))},m.src=a,document.body.appendChild(m)}return o},g.extend(g.expr[":"],{tinymce:function(i){var a;return !!(i.id&&"tinymce" in window&&(a=tinymce.get(i.id),a&&a.editorManager===tinymce))}})}(jQuery);