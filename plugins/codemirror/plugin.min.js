tinymce.PluginManager.requireLangPack("codemirror");tinymce.PluginManager.add("codemirror",function(editor,url){function showSourceEditor(){editor.focus();editor.selection.collapse(true);editor.selection.setContent('<span class="CmCaReT" style="display:none">&#x0;</span>');var win=editor.windowManager.open({title:"HTML source code",url:url+"/source.html",width:800,height:550,resizable:true,maximizable:true,buttons:[{text:"Ok",subtype:"primary",onclick:function(){var doc=document.querySelectorAll(".mce-container-body>iframe")[0];doc.contentWindow.submit();win.close()}},{text:"Cancel",onclick:"close"}]})}editor.addButton("code",{title:"Source code",icon:"code",onclick:showSourceEditor});editor.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:showSourceEditor})});