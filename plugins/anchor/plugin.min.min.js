tinymce.PluginManager.add("anchor",function(c){var a=function(f){return !f.attr("href")&&(f.attr("id")||f.attr("name"))&&!f.firstChild},d=function(f){return function(g){for(var e=0;e<g.length;e++){a(g[e])&&g[e].attr("contenteditable",f)}}},b=function(){var e=c.selection.getNode(),g="A"==e.tagName&&""===c.dom.getAttrib(e,"href"),f="";g&&(f=e.id||e.name||""),c.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:f},onsubmit:function(j){var h=j.data.id;g?(e.removeAttribute("name"),e.id=h):(c.selection.collapse(!0),c.execCommand("mceInsertContent",!1,c.dom.createHTML("a",{id:h})))}})};tinymce.Env.ceFalse&&c.on("PreInit",function(){c.parser.addNodeFilter("a",d("false")),c.serializer.addNodeFilter("a",d(null))}),c.addCommand("mceAnchor",b),c.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:b,stateSelector:"a:not([href])"}),c.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:b})});