tinymce.PluginManager.add("autoresize",function(editor){var settings=editor.settings,oldSize=0;function isFullscreen(){return editor.plugins.fullscreen&&editor.plugins.fullscreen.isFullscreen()}if(editor.settings.inline){return}function resize(e){var deltaSize,doc,body,docElm,DOM=tinymce.DOM,resizeHeight,myHeight,marginTop,marginBottom,paddingTop,paddingBottom,borderTop,borderBottom;doc=editor.getDoc();if(!doc){return}body=doc.body;docElm=doc.documentElement;resizeHeight=settings.autoresize_min_height;if(!body||e&&e.type==="setcontent"&&e.initial||isFullscreen()){if(body&&docElm){body.style.overflowY="auto";docElm.style.overflowY="auto"}return}marginTop=editor.dom.getStyle(body,"margin-top",true);marginBottom=editor.dom.getStyle(body,"margin-bottom",true);paddingTop=editor.dom.getStyle(body,"padding-top",true);paddingBottom=editor.dom.getStyle(body,"padding-bottom",true);borderTop=editor.dom.getStyle(body,"border-top-width",true);borderBottom=editor.dom.getStyle(body,"border-bottom-width",true);myHeight=body.offsetHeight+parseInt(marginTop,10)+parseInt(marginBottom,10)+parseInt(paddingTop,10)+parseInt(paddingBottom,10)+parseInt(borderTop,10)+parseInt(borderBottom,10);if(isNaN(myHeight)||myHeight<=0){myHeight=tinymce.Env.ie?body.scrollHeight:tinymce.Env.webkit&&body.clientHeight===0?0:body.offsetHeight}if(myHeight>settings.autoresize_min_height){resizeHeight=myHeight}if(settings.autoresize_max_height&&myHeight>settings.autoresize_max_height){resizeHeight=settings.autoresize_max_height;body.style.overflowY="auto";docElm.style.overflowY="auto"}else{body.style.overflowY="hidden";docElm.style.overflowY="hidden";body.scrollTop=0}if(resizeHeight!==oldSize){deltaSize=resizeHeight-oldSize;DOM.setStyle(editor.iframeElement,"height",resizeHeight+"px");oldSize=resizeHeight;if(tinymce.isWebKit&&deltaSize<0){resize(e)}}}function wait(times,interval,callback){tinymce.util.Delay.setEditorTimeout(editor,function(){resize({});if(times--){wait(times,interval,callback)}else if(callback){callback()}},interval)}settings.autoresize_min_height=parseInt(editor.getParam("autoresize_min_height",editor.getElement().offsetHeight),10);settings.autoresize_max_height=parseInt(editor.getParam("autoresize_max_height",0),10);editor.on("init",function(){var overflowPadding,bottomMargin;overflowPadding=editor.getParam("autoresize_overflow_padding",1);bottomMargin=editor.getParam("autoresize_bottom_margin",50);if(overflowPadding!==false){editor.dom.setStyles(editor.getBody(),{paddingLeft:overflowPadding,paddingRight:overflowPadding})}if(bottomMargin!==false){editor.dom.setStyles(editor.getBody(),{paddingBottom:bottomMargin})}});editor.on("nodechange setcontent keyup FullscreenStateChanged",resize);if(editor.getParam("autoresize_on_init",true)){editor.on("init",function(){wait(20,100,function(){wait(5,1e3)})})}editor.addCommand("mceAutoResize",resize)});